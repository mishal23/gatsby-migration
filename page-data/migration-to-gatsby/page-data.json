{"componentChunkName":"component---src-components-blog-post-js","path":"/migration-to-gatsby","result":{"data":{"markdownRemark":{"html":"<p>I had started building my personal website in 2017 with static HTML, CSS, JS and in 2018 based on the available options, I went ahead with Jekyll. Overall, everything was working fine with Jekyll and was smooth. Although, my Twitter feed was filled with <a href=\"https://www.gatsbyjs.org/\">Gatsby</a>, and I had seen some seen some stickers named \"My Website is faster than yours\" of Gatsby while interacting with them for <a href=\"https://hackverse.nitk.ac.in\">HackVerse Hackathon</a>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6438d338cd1d0f7b42535f45f24ae359/8e1fc/website-faster.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 133.12883435582822%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAwACBAX/xAAXAQADAQAAAAAAAAAAAAAAAAABAgMA/9oADAMBAAIQAxAAAAHBp1VPHLOPPcczLRTb/8QAGxAAAgMAAwAAAAAAAAAAAAAAAQIAAxEQEjH/2gAIAQEAAQUCWvsnh2VWCNmGliTEtjHDz//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABgRAAIDAAAAAAAAAAAAAAAAAAASARAR/9oACAECAQE/AWGgyv/EACEQAAECBQUBAAAAAAAAAAAAAAEAERAhIjFBAgMSIFFh/9oACAEBAAY/AnymMBpsVNhj4qbQ47sx6qSW6f/EACAQAAICAQMFAAAAAAAAAAAAAAERACExECBRQYGRsdH/2gAIAQEAAT8hMIcjQjKhHRxhxcBzi8nwyge6BbFGM6hw9xyDhxZ2f//aAAwDAQACAAMAAAAQcN3M/8QAFhEBAQEAAAAAAAAAAAAAAAAAEQAQ/9oACAEDAQE/ECN//8QAGBEBAQEBAQAAAAAAAAAAAAAAAQAhEWH/2gAIAQIBAT8QGO3tPUZf/8QAHRABAAIDAQEBAQAAAAAAAAAAAREhADFRQWFxkf/aAAgBAQABPxBfNBCnn97rFBBeOW9yZKxDsmomptp7WFtYyEEag9kvlTjxU4aw/oWfcqvAyJ44bQ1aljg9PuzKFYFMauPkzGO8S8Fz/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"gatsby quote\"\n        title=\"gatsby quote\"\n        src=\"/static/6438d338cd1d0f7b42535f45f24ae359/6aca1/website-faster.jpg\"\n        srcset=\"/static/6438d338cd1d0f7b42535f45f24ae359/d2f63/website-faster.jpg 163w,\n/static/6438d338cd1d0f7b42535f45f24ae359/c989d/website-faster.jpg 325w,\n/static/6438d338cd1d0f7b42535f45f24ae359/6aca1/website-faster.jpg 650w,\n/static/6438d338cd1d0f7b42535f45f24ae359/8e1fc/website-faster.jpg 900w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>This really made me look at some of the Gatsby sites and it really felt that the websites were fast, and it had support of PWA, something which I really wanted on my site. Moreover, since it was based on React, I decided to try out to move my personal website from Jekyll to Gatsby.</p>\n<h2>The Migration</h2>\n<p>I won't be listing the steps in detail on how I did the migration because there are plently of blogs out there and the documentation provided by Gatsby is excellent. I could get anything I wanted on the Gatsby documentation. I started looking into the tutorial of Gatsby to get a hang of it, and started my new website with the default starter code.</p>\n<p>Here are the major steps:</p>\n<ul>\n<li>Started looking into the <a href=\"https://www.gatsbyjs.org/tutorial/\">tutorial</a>,</li>\n<li>Took the gatsby default starter code,</li>\n<li>Added the inital components (<code>sidebar</code>, <code>post</code>, <code>default</code>), and setup the basic styling as per the old website,</li>\n<li>Added the content for the non-blog pages (<code>about</code>, <code>projects</code>, <code>contact</code>, <code>404</code>),</li>\n<li>Setup blog page component view (blogPost) from markdown pages using the <code>onCreateNode</code>, <code>createPages</code> APIs,</li>\n<li>Learnt a bit about using GraphQL and GraphiQL UI,</li>\n<li>Exported all the blog posts from the previous site,</li>\n<li>Index Page Display to list all the blog posts (<code>blogList</code>),</li>\n<li>Added SEO for all pages,</li>\n<li>Added automatic deployment with TravisCI,</li>\n<li>Added Google Analytics &#x26; PWA support,</li>\n<li>Some other fixes for overall look &#x26; feel.</li>\n</ul>\n<p>Here's the lighthouse report of the new website:\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 605px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1558f1413b07985991012105d5a0e745/3cb18/lighthouse-report.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 36.809815950920246%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHdgSwP/8QAFhAAAwAAAAAAAAAAAAAAAAAAABAR/9oACAEBAAEFAlD/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAYEAEBAQEBAAAAAAAAAAAAAAABIQAxUf/aAAgBAQABPyFG3WXmF67/2gAMAwEAAgADAAAAEPQf/8QAFhEAAwAAAAAAAAAAAAAAAAAAAAER/9oACAEDAQE/EIiI/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGRAAAgMBAAAAAAAAAAAAAAAAAREAITFh/9oACAEBAAE/EACeCKvImfpewBu4z//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Lighthouse Report\"\n        title=\"Lighthouse Report\"\n        src=\"/static/1558f1413b07985991012105d5a0e745/3cb18/lighthouse-report.jpg\"\n        srcset=\"/static/1558f1413b07985991012105d5a0e745/d2f63/lighthouse-report.jpg 163w,\n/static/1558f1413b07985991012105d5a0e745/c989d/lighthouse-report.jpg 325w,\n/static/1558f1413b07985991012105d5a0e745/3cb18/lighthouse-report.jpg 605w\"\n        sizes=\"(max-width: 605px) 100vw, 605px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>GitHub Actions</h2>\n<p>When GitHub Actions was released in <a href=\"https://github.blog/2019-08-08-github-actions-now-supports-ci-cd/\">August 2019</a>, I always wanted to give it a try for some project but didn't get enough time to try it out. While I was using Travis CI with this deployment, I thought of giving GitHub Actions a try. Finally!</p>\n<p>Here are the steps I followed:</p>\n<ul>\n<li>Generated a New Token from GitHub <code>Settings -> Developer Settings -> Personal access tokens</code> with <strong>repo</strong> access scope.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6c23295de0d6fad7f13f43dea6a57aec/d7ab4/repo-token.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 30.67484662576687%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABKUlEQVQY022QbU/CMBDH9w3VoFERAZ1GP5gvFSOw4QYKfhdfaISxtlv30HZ/rhUjJl7yy117z+cFYYjJc4ThaIxRECIMJ4jiKV7mC7wS88Wb05Z4OkNExFuieIZxEGAwDPAweMLd4z28rn+Lds9Hu3uJzlb3/Ruckd3p++iRfX5xTVzh4OgUe63jP+wfnjisr0V4olAQeQHGGFLGUdU1jGnQNN8YQmsDpbWzmx12pdniVRrg5a/TxgmRueKMWK9TKKXxn3CK+/xaIkkZJMWVPIPHhMT7MkeWS1RVBW0MOGdULEWSrLFaJWCcU7Kgf2ogSjCp3YSapq5pI6UUNDU19Pak4Eioup3EJtnBWV7jI62RyZKSlEv8QdH6mk5iqHFRlI6yqiHtuWSBDbI6oL0V6DNFAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"GitHub Token\"\n        title=\"GitHub Token\"\n        src=\"/static/6c23295de0d6fad7f13f43dea6a57aec/a6d36/repo-token.png\"\n        srcset=\"/static/6c23295de0d6fad7f13f43dea6a57aec/222b7/repo-token.png 163w,\n/static/6c23295de0d6fad7f13f43dea6a57aec/ff46a/repo-token.png 325w,\n/static/6c23295de0d6fad7f13f43dea6a57aec/a6d36/repo-token.png 650w,\n/static/6c23295de0d6fad7f13f43dea6a57aec/e548f/repo-token.png 975w,\n/static/6c23295de0d6fad7f13f43dea6a57aec/d7ab4/repo-token.png 1014w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></li>\n<li>I was deploying on my root github.io so the name of my repo is mishal23.github.io, I added the token in the repository <code>Settings -> Secrets</code> with the name <code>GH_TOKEN</code>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/455a3edaf409e257d143ca31a423ba8f/f6f7a/set-secret.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.920245398773%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABdklEQVQoz5VRi27DIAzk/3+yUpc0KXnyCq+Qm02aapqqSUM6GQw2d2cxTjOmRaF7DnjIGXJaMa8KWusKpRSstYgxvuGcgzEW3nssy1Lr2+6JYZAQ2kX0ayBE3AaPm/QYVEBKGSEmxFdk+BDrWY5TJWDdBikH6HXFQiSs8xApUVEI8NuGEHyFJQbcQBMLt3ms2tTIDTgaS2+JqaGzmUco+UDOGXkvEDbsYJRyYC8F5TigSCpb8Z91MKhWqC3jqUhWKpypyYUk9P2T/NNYWQ75xFEOI0VV7/lT9tGRv5oUsEW8asPR5NqI2fFPAxXe7w0eXYf20aFpWnRdj/tXg67v0bQtvSHvLNnhMlLOb6ZCbzt6lUjuye6UvmM/Mn1Qau7Ml3r387yTZ1dd9AGZ5iG0zzTh9H540IMtRczeIuS9mvO++4DLJk9WcFNhQiGGGVt8saGfYy4wvpzDuhhdlvzClePFe7FME+RiiNUpl6W8ZnZO7w92n/ANG3UK/c1AsmsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Set Secret Token\"\n        title=\"Set Secret Token\"\n        src=\"/static/455a3edaf409e257d143ca31a423ba8f/a6d36/set-secret.png\"\n        srcset=\"/static/455a3edaf409e257d143ca31a423ba8f/222b7/set-secret.png 163w,\n/static/455a3edaf409e257d143ca31a423ba8f/ff46a/set-secret.png 325w,\n/static/455a3edaf409e257d143ca31a423ba8f/a6d36/set-secret.png 650w,\n/static/455a3edaf409e257d143ca31a423ba8f/e548f/set-secret.png 975w,\n/static/455a3edaf409e257d143ca31a423ba8f/f6f7a/set-secret.png 1009w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></li>\n<li>Created a file named <code>gh-pages-deploy.yml</code> in the directory <code>.github/workflows/</code> using the Simple Workflow template available under Actions tab on the repository.</li>\n<li>Since, the User pages must be built from the master branch, I set my default branch as <strong>source</strong> on the repository and left the master branch for deployment and hence triggered the workflow only on <strong>source</strong> branch push,</li>\n<li>I configured it to node.js environment with <strong>12.x</strong> version, cached the dependencies so that it doesn't have to be installed everytime and faster CI,</li>\n<li>\n<p>Configured to initial git settings of user.name and user.email as it is required, used to <strong>GH_TOKEN</strong> to give the access and then made the deployment run using the following command:</p>\n\n        <deckgo-highlight-code language=\"bash\"  >\n          <code slot=\"code\">npm run deploy</code>\n        </deckgo-highlight-code>\n      \n</li>\n</ul>\n<p>That's it! Pretty simple! Really like the simplicty of GitHub Actions. Find the complete configuration file <a href=\"https://github.com/mishal23/mishal23.github.io/blob/source/.github/workflows/gh-pages-deploy.yml\">here</a></p>\n<h2>Conclusion</h2>\n<p>The migration was definitely worth it, the site is actually blazing fast 🚀 and moreover, got to pick up some new skills. Would recommend anyone to migrate to gatsby. There are certain features and fixes which I plan to do in due time. If you need any further help, feel free to take a look at <a href=\"https://github.com/mishal23/mishal23.github.io/\">the repo</a> or <a href=\"/contact\">contact me</a> If there are any issues you come across, please do open up <a href=\"https://github.com/mishal23/mishal23.github.io/issues\">here</a> or would love it if you fix it :)</p>","frontmatter":{"title":"Migrating Jekyll Blog to Gatsby","date":"April 28, 2020","description":"Steps to migrate Jekyll Blog to Gatsby and deploying Site using GitHub Actions to GitHub Pages","keywords":"mishal23, gatsby, jekyll, migration, static-site-generator, fast, modern, frameworks, react, graphql, github-actions, github, ci-cd"}}},"pageContext":{"slug":"/migration-to-gatsby"}}}